<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Dentalist Diagnostic</title>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .diagnostic {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background: #d4edda; border-left: 4px solid #28a745; }
        .error { background: #f8d7da; border-left: 4px solid #dc3545; }
        .warning { background: #fff3cd; border-left: 4px solid #ffc107; }
        .info { background: #d1ecf1; border-left: 4px solid #17a2b8; }
        
        .test-btn {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .test-btn:hover {
            background: #005a9e;
        }
        
        #console-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>üîß Dentalist Website Diagnostic</h1>
    
    <div class="diagnostic">
        <h2>üìÅ File Loading Test</h2>
        <div id="file-status">Testing...</div>
        <div id="css-loading"></div>
        <div id="js-loading"></div>
    </div>
    
    <div class="diagnostic">
        <h2>üé® CSS Variables Test</h2>
        <div id="css-vars-status">Testing...</div>
        <div id="css-vars-output"></div>
    </div>
    
    <div class="diagnostic">
        <h2>üîÑ Theme System Test</h2>
        <div id="theme-status">Testing...</div>
        <button class="test-btn" onclick="testBasicTheme()">Test Basic Theme Toggle</button>
        <button class="test-btn" onclick="testBlueTheme()">Test Blue Theme</button>
        <button class="test-btn" onclick="testPurpleTheme()">Test Purple Theme</button>
        <div id="theme-output"></div>
    </div>
    
    <div class="diagnostic">
        <h2>üñ•Ô∏è Layout Test</h2>
        <div id="layout-status">Testing...</div>
        <div id="layout-output"></div>
    </div>
    
    <div class="diagnostic">
        <h2>üìä Console Output</h2>
        <div id="console-output">Console messages will appear here...</div>
        <button class="test-btn" onclick="clearConsole()">Clear Console</button>
    </div>
    
    <div class="diagnostic">
        <h2>üåê Quick Actions</h2>
        <button class="test-btn" onclick="goToMainSite()">Open Main Site</button>
        <button class="test-btn" onclick="goToThemeTest()">Open Theme Test</button>
        <button class="test-btn" onclick="reloadPage()">Reload Diagnostic</button>
    </div>

    <script>
        // Console capture
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        const consoleOutput = document.getElementById('console-output');
        
        function addToConsole(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? '‚ùå' : type === 'warn' ? '‚ö†Ô∏è' : 'üìù';
            consoleOutput.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole(args.join(' '), 'log');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsole(args.join(' '), 'warn');
        };
        
        // File loading test
        function testFileLoading() {
            console.log('üîç Testing file loading...');
            
            const files = [
                { name: 'style.css', url: 'style.css' },
                { name: 'variables.css', url: 'css/variables.css' },
                { name: 'theme-fixes.css', url: 'css/theme-fixes.css' },
                { name: 'script.js', url: 'script.js' }
            ];
            
            let results = [];
            let loaded = 0;
            
            files.forEach(file => {
                fetch(file.url)
                    .then(response => {
                        results.push(`‚úÖ ${file.name}: ${response.status} ${response.statusText}`);
                        console.log(`File loaded: ${file.name}`);
                    })
                    .catch(error => {
                        results.push(`‚ùå ${file.name}: Failed to load`);
                        console.error(`File failed: ${file.name}`, error);
                    })
                    .finally(() => {
                        loaded++;
                        if (loaded === files.length) {
                            document.getElementById('file-status').innerHTML = 
                                '<div class="status info">' + results.join('<br>') + '</div>';
                        }
                    });
            });
        }
        
        // CSS Variables test
        function testCSSVariables() {
            console.log('üé® Testing CSS variables...');
            
            const style = getComputedStyle(document.body);
            const testVars = [
                'primary-color',
                'text-primary',
                'bg-primary',
                'border-color'
            ];
            
            let results = [];
            let foundVars = 0;
            
            testVars.forEach(varName => {
                const value = style.getPropertyValue(`--${varName}`);
                if (value && value.trim()) {
                    results.push(`‚úÖ --${varName}: ${value.trim()}`);
                    foundVars++;
                } else {
                    results.push(`‚ùå --${varName}: Not found`);
                }
            });
            
            const status = foundVars > 0 ? 'success' : 'error';
            const statusText = foundVars > 0 
                ? `Found ${foundVars}/${testVars.length} CSS variables` 
                : 'No CSS variables found';
                
            document.getElementById('css-vars-status').innerHTML = 
                `<div class="status ${status}">${statusText}</div>`;
            document.getElementById('css-vars-output').innerHTML = 
                results.join('<br>');
                
            console.log(`CSS Variables: ${foundVars}/${testVars.length} found`);
        }
        
        // Theme system test
        function testBasicTheme() {
            console.log('üîÑ Testing basic theme system...');
            
            try {
                // Test data-theme attribute
                document.body.setAttribute('data-theme', 'dark');
                console.log('‚úÖ Data-theme attribute set');
                
                // Test class toggle
                document.body.classList.add('dark-theme');
                console.log('‚úÖ Dark-theme class added');
                
                setTimeout(() => {
                    document.body.classList.remove('dark-theme');
                    document.body.setAttribute('data-theme', 'light');
                    console.log('‚úÖ Reverted to light theme');
                }, 1000);
                
                document.getElementById('theme-status').innerHTML = 
                    '<div class="status success">Basic theme system working</div>';
                    
            } catch (error) {
                console.error('‚ùå Theme system error:', error);
                document.getElementById('theme-status').innerHTML = 
                    '<div class="status error">Theme system failed: ' + error.message + '</div>';
            }
        }
        
        function testBlueTheme() {
            console.log('üîµ Testing blue theme...');
            
            // Remove existing theme CSS
            const existing = document.querySelector('link[data-theme-css]');
            if (existing) existing.remove();
            
            // Add blue theme CSS
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = 'css/theme-blue.css';
            link.setAttribute('data-theme-css', 'blue');
            document.head.appendChild(link);
            
            document.body.setAttribute('data-theme', 'blue');
            
            console.log('üîµ Blue theme applied');
        }
        
        function testPurpleTheme() {
            console.log('üü£ Testing purple theme...');
            
            // Remove existing theme CSS
            const existing = document.querySelector('link[data-theme-css]');
            if (existing) existing.remove();
            
            // Add purple theme CSS
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = 'css/theme-purple.css';
            link.setAttribute('data-theme-css', 'purple');
            document.head.appendChild(link);
            
            document.body.setAttribute('data-theme', 'purple');
            
            console.log('üü£ Purple theme applied');
        }
        
        // Layout test
        function testLayout() {
            console.log('üñ•Ô∏è Testing layout...');
            
            const body = document.body;
            const html = document.documentElement;
            
            const results = [
                `Body width: ${body.offsetWidth}px`,
                `Body height: ${body.offsetHeight}px`,
                `HTML width: ${html.offsetWidth}px`,
                `HTML height: ${html.offsetHeight}px`,
                `Viewport width: ${window.innerWidth}px`,
                `Viewport height: ${window.innerHeight}px`,
                `Has horizontal scroll: ${body.scrollWidth > window.innerWidth ? 'YES ‚ùå' : 'NO ‚úÖ'}`,
                `Body overflow-x: ${getComputedStyle(body).overflowX}`,
                `HTML overflow-x: ${getComputedStyle(html).overflowX}`
            ];
            
            document.getElementById('layout-status').innerHTML = 
                '<div class="status info">Layout analysis complete</div>';
            document.getElementById('layout-output').innerHTML = 
                results.join('<br>');
                
            console.log('Layout test completed');
        }
        
        // Utility functions
        function clearConsole() {
            consoleOutput.textContent = 'Console cleared...\n';
        }
        
        function goToMainSite() {
            window.open('index.html', '_blank');
        }
        
        function goToThemeTest() {
            window.open('theme-test.html', '_blank');
        }
        
        function reloadPage() {
            location.reload();
        }
        
        // Initialize tests
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Dentalist Diagnostic Started');
            
            setTimeout(() => {
                testFileLoading();
                testCSSVariables();
                testLayout();
            }, 500);
        });
        
        // Error handling
        window.addEventListener('error', function(event) {
            console.error('Global error:', event.error);
        });
        
        window.addEventListener('unhandledrejection', function(event) {
            console.error('Unhandled promise rejection:', event.reason);
        });
    </script>
</body>
</html>
